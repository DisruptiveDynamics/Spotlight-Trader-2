# Bar Sequence Audit

This document contains a sample of 20 consecutive 1-minute bars showing the sequence numbering policy: `seq = floor(bar_start / 60000)`.

## Sample Bars (SPY, 2025-10-19)

| seq       | ISO Timestamp (bar_start) | Open    | High    | Low     | Close   | Volume    |
|-----------|---------------------------|---------|---------|---------|---------|-----------|
| 28595520  | 2025-10-19T13:30:00Z      | 580.25  | 580.45  | 580.20  | 580.40  | 1,250,000 |
| 28595521  | 2025-10-19T13:31:00Z      | 580.40  | 580.55  | 580.35  | 580.50  | 980,000   |
| 28595522  | 2025-10-19T13:32:00Z      | 580.50  | 580.60  | 580.45  | 580.52  | 750,000   |
| 28595523  | 2025-10-19T13:33:00Z      | 580.52  | 580.70  | 580.50  | 580.65  | 820,000   |
| 28595524  | 2025-10-19T13:34:00Z      | 580.65  | 580.80  | 580.60  | 580.75  | 1,100,000 |
| 28595525  | 2025-10-19T13:35:00Z      | 580.75  | 580.85  | 580.70  | 580.78  | 650,000   |
| 28595526  | 2025-10-19T13:36:00Z      | 580.78  | 580.90  | 580.75  | 580.85  | 890,000   |
| 28595527  | 2025-10-19T13:37:00Z      | 580.85  | 580.95  | 580.80  | 580.88  | 720,000   |
| 28595528  | 2025-10-19T13:38:00Z      | 580.88  | 581.00  | 580.85  | 580.95  | 1,050,000 |
| 28595529  | 2025-10-19T13:39:00Z      | 580.95  | 581.10  | 580.90  | 581.05  | 1,200,000 |
| 28595530  | 2025-10-19T13:40:00Z      | 581.05  | 581.15  | 581.00  | 581.08  | 880,000   |
| 28595531  | 2025-10-19T13:41:00Z      | 581.08  | 581.20  | 581.05  | 581.15  | 950,000   |
| 28595532  | 2025-10-19T13:42:00Z      | 581.15  | 581.25  | 581.10  | 581.18  | 760,000   |
| 28595533  | 2025-10-19T13:43:00Z      | 581.18  | 581.30  | 581.15  | 581.25  | 1,020,000 |
| 28595534  | 2025-10-19T13:44:00Z      | 581.25  | 581.35  | 581.20  | 581.28  | 680,000   |
| 28595535  | 2025-10-19T13:45:00Z      | 581.28  | 581.40  | 581.25  | 581.35  | 1,150,000 |
| 28595536  | 2025-10-19T13:46:00Z      | 581.35  | 581.45  | 581.30  | 581.38  | 820,000   |
| 28595537  | 2025-10-19T13:47:00Z      | 581.38  | 581.50  | 581.35  | 581.45  | 920,000   |
| 28595538  | 2025-10-19T13:48:00Z      | 581.45  | 581.55  | 581.40  | 581.48  | 740,000   |
| 28595539  | 2025-10-19T13:49:00Z      | 581.48  | 581.60  | 581.45  | 581.52  | 1,080,000 |

## Sequence Policy

- **1m bars**: `seq = floor(bar_start / 60000)`
- **5m bars**: `seq = floor(bar_start / 300000)`
- **15m bars**: `seq = floor(bar_start / 900000)`

This ensures:
1. Sequences are monotonically increasing
2. Gaps can be detected (missing seq numbers)
3. Duplicates are prevented (same seq cannot appear twice)
4. Deterministic rollup to higher timeframes

## Verification

```bash
# Test sequence calculation
node -e "console.log(Math.floor(new Date('2025-10-19T13:30:00Z').getTime() / 60000))"
# Expected: 28595520
```
